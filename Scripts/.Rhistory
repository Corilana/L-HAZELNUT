all <- read.csv("C:/Users/franc/Google Drive/PhD/Deruta/auto/all.csv")
View(all)
plant <-read.csv("C:/Users/franc/Google Drive/PhD/Deruta/2020/Original/2020Inne_autor1.csv")
all <- read.csv("C:/Users/franc/Google Drive/PhD/Deruta/auto/all.csv")
all[all$c>1,8]=1
all[all$b>1,11]=1
df=all[FALSE,]#EMPTY DF
s.prev=0#preavious shoot
r.prev=0#preavious rank
p.prev=0#previous position
d.prev=0#previous derived from
l.prev=0
nline=dim(all[1])[1]#lines af all.csv
for (i in 1:5) {
s=all$shoot1yo[i]
r=all$rank1yo[i]
d=all$derived.from[i]
p=all$position[i]
l=all$length2yo.cm.[i]
# p=all$position[i]
if ((s!=s.prev)&(r!=r.prev)) {#situation1: shoot and rank are different from previous. So first node
x=all$X.oss[i]#x=number of buds
df=rbind(df, all[rep(i, each = x), ])
}
if (s==s.prev) {#situation2: same shoot
x=all$X.oss[i]
if(p=="AP"){
x=0
}
if(r!=r.prev){
if(r==all$rank1yo[i+1]){
x=x
} else {
if ((l==all$length2yo.cm.[i+1])&(d==all$derived.from[i+1])){
x=x-1
}
x=x
}
}
if(r==r.prev){
if(d==d.prev&l==l.prev){
x=0
} else {
x=1
}
}
df=rbind(df, all[rep(i, each = x), ])
}
s.prev=s
r.prev=r
d.prev=d
p.prev=p
l.prev=l
}
s.prev=0#preavious shoot
r.prev=0#preavious rank
p.prev=0#previous position
d.prev=0#previous derived from
l.prev=0
nline=dim(all[1])[1]#lines af all.csv
for (i in 1:nline) {
s=all$shoot1yo[i]
r=all$rank1yo[i]
d=all$derived.from[i]
p=all$position[i]
l=all$length2yo.cm.[i]
# p=all$position[i]
if ((s!=s.prev)&(r!=r.prev)) {#situation1: shoot and rank are different from previous. So first node
x=all$X.oss[i]#x=number of buds
df=rbind(df, all[rep(i, each = x), ])
}
if (s==s.prev) {#situation2: same shoot
x=all$X.oss[i]
if(p=="AP"){
x=0
}
if(r!=r.prev){
if(r==all$rank1yo[i+1]){
x=x
} else {
if ((l==all$length2yo.cm.[i+1])&(d==all$derived.from[i+1])){
x=x-1
}
x=x
}
}
if(r==r.prev){
if(d==d.prev&l==l.prev){
x=0
} else {
x=1
}
}
df=rbind(df, all[rep(i, each = x), ])
}
s.prev=s
r.prev=r
d.prev=d
p.prev=p
l.prev=l
}
View(df)
